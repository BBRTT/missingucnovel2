<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì²« ë²ˆì§¸ ì†Œì„¤</title>

  <style>
    body {
  font-family: serif;
  font-size: 20px;
  line-height: 1.8;
  padding: 40px;
  cursor: pointer;

  display: flex;
  flex-direction: column;
  align-items: center;
}
#story {
  max-width: 600px;
  text-align: center;
}

    .line {
      opacity: 0;
      transition: opacity 0.4s ease;
      margin-bottom: 20px;
    }

    .line.show {
      opacity: 1;
    }
    .line.hide {
  opacity: 0;
}

button {
  margin: 20px 0 40px;
  padding: 10px 24px;
  font-size: 16px;
  border-radius: 999px;
  border: 1px solid #ccc;
  background: white;
  cursor: pointer;
}

button:hover {
  background: #f2f2f2;
}

  </style>
</head>

<body>

<h1>ğŸ”¥ í…ŒìŠ¤íŠ¸ ì¤‘ ğŸ”¥</h1>

<button id="startBtn">BGM</button>
<audio id="bgm1" src="ScreenRecording_12-28-2025-05-32-44_1.mp3"></audio>
<audio id="bgm2" src="Classic 2.m4a"></audio>

<div id="story">
  <p class="line disappear">ì•ˆë…•í•˜ì„¸ìš”! ì˜ ì§€ë‚´ì…¨ë‚˜ìš”?</p>
  <p class="line disappear">ì˜ˆì „ì˜ ì „ ìœ ì”¨ë…¸ë²¨ ì‘ê°€ê°€ ë˜ëŠ”ê²Œ ê¿ˆì´ì—ˆì–´ìš”. ê·¸ë¦¬ê³  ì•„ì§ë„ ê·¸ ê¿ˆì„ ìŠì§€ ëª»í•˜ê³  ê²°êµ­ì—” ì´ë ‡ê²Œ ë§Œë“¤ì–´ë²„ë ¸ë‹µë‹ˆë‹¤.^^.</p>
  <p class="line disappear">ê·¸ë•Œì˜ ê°ì„±ì´ ì˜ ë¬»ì–´ë‚˜ëŠ” ê¸€ì´ ë˜ê¸¸ ë°”ë¼ë©´ì„œ ì¨ë´…ë‹ˆë‹¤. ê·¸ëŸ¼ ì¬ë°Œê²Œ ë´ì£¼ì„¸ìš”!</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line bgm2-start"> ì²«ë¬¸ì¥</p>
  
</div>

<script>
  // ------------------------------
  // easing ê¸°ë°˜ í˜ì´ë“œ ì¸ / í˜ì´ë“œ ì•„ì›ƒ
  // ------------------------------
  function fadeIn(audio, duration = 1500) {
    audio.pause();
    audio.currentTime = 0;
    audio.volume = 0;
    audio.play();
    const stepTime = 20; // 20msë§ˆë‹¤ ì—…ë°ì´íŠ¸
    const steps = duration / stepTime;
    let step = 0;
    const interval = setInterval(() => {
      step++;
      // ease-in íš¨ê³¼ ì ìš© (ì´ˆë°˜ ì²œì²œíˆ, í›„ë°˜ ë¹ ë¥´ê²Œ)
      audio.volume = Math.min(Math.pow(step / steps, 2), 1);
      if (step >= steps) clearInterval(interval);
    }, stepTime);
  }

  function fadeOut(audio, duration = 1000, callback) {
    const stepTime = 20;
    const steps = duration / stepTime;
    let step = 0;
    const initialVolume = audio.volume;
    const interval = setInterval(() => {
      step++;
      // ease-out íš¨ê³¼ ì ìš© (ì´ˆë°˜ ë¹ ë¥´ê²Œ, í›„ë°˜ ì²œì²œíˆ)
      audio.volume = Math.max(initialVolume * (1 - Math.pow(step / steps, 2)), 0);
      if (step >= steps) {
        audio.pause();
        audio.currentTime = 0;
        clearInterval(interval);
        if (callback) callback();
      }
    }, stepTime);
  }

  // ------------------------------
  // ê¸€ + ìŒì•… ë³€ìˆ˜
  // ------------------------------
  const lines = document.querySelectorAll(".line");
  let index = 0;
  const bgm1 = document.getElementById("bgm1");
  const bgm2 = document.getElementById("bgm2");
  const startBtn = document.getElementById("startBtn");

  // ------------------------------
  // BGM ì‹œì‘ ë²„íŠ¼
  // ------------------------------
  startBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    fadeIn(bgm1, 1500);
  });

  // ------------------------------
  // í™”ë©´ í´ë¦­ ì´ë²¤íŠ¸
  // ------------------------------
  document.body.addEventListener("click", () => {
    if (index >= lines.length) return;

    const currentLine = lines[index];

    // ì´ì „ ê¸€ í˜ì´ë“œ ì•„ì›ƒ
    const toDisappear = document.querySelectorAll(".disappear");
    toDisappear.forEach(line => {
      if (line !== currentLine) {
        line.classList.remove("show");
        line.classList.add("hide");
      }
    });

    // í˜„ì¬ ê¸€ ë“±ì¥
    currentLine.classList.add("show");
    currentLine.classList.remove("hide");

    // ìŒì•… ì „í™˜
    if (currentLine.classList.contains("bgm2-start")) {
      fadeOut(bgm1, 1000, () => fadeIn(bgm2, 1500));
    }

    index++;
  });
</script>





</body>
</html>
