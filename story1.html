<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>ì²« ë²ˆì§¸ ì†Œì„¤</title>

  <style>


  /* --------------------------
   ì „ì²´ í˜ì´ì§€
--------------------------- */
body {
  font-family: 'Courier New', Courier, monospace; /* ì‚¬ê°ì§„ ê¸€ê¼´ */
  font-size: 15px;               /* ê¸°ë³¸ ë³¸ë¬¸ ê¸€ì”¨ í¬ê¸° */
  line-height: 1.8;              /* ì¤„ ê°„ê²© ë„‰ë„‰íˆ */
  padding: 40px;
  cursor: pointer;

  display: flex;
  flex-direction: column;
  align-items: center;           /* ê¸€ ê°€ìš´ë° ì •ë ¬ */
  background-color: #fafafa;     /* ì€ì€í•œ ë°°ê²½ìƒ‰ */
}

/* --------------------------
   ì†Œì„¤ ì˜ì—­
--------------------------- */
#story {
  max-width: 600px;              /* ê°€ë…ì„± ì¢‹ì€ ìµœëŒ€ ë„ˆë¹„ */
  text-align: center;            /* ê¸€ ê°€ìš´ë° ì •ë ¬ */
}

/* --------------------------
   ê¸€ ë¼ì¸
--------------------------- */
.line {
  opacity: 0;                     /* ê¸°ë³¸ ìˆ¨ê¹€ */
  transition: opacity 0.4s ease;  /* ë¶€ë“œëŸ¬ìš´ í˜ì´ë“œ */
  margin-bottom: 20px;            /* ë¬¸ë‹¨ ê°„ê²© */
}

.line.show {
  opacity: 1;                     /* ë³´ì—¬ì§ˆ ë•Œ */
}

.line.hide {
  opacity: 0;                     /* ì‚¬ë¼ì§ˆ ë•Œ */
}

/* --------------------------
   ì œëª©
--------------------------- */
h1 {
  font-size: 30px;
  text-align: center;
  margin-bottom: 20px;
  color: #333;

  background-color: #fff;   /* ë°°ê²½ìƒ‰ */
  border: 2px solid #ccc;   /* í…Œë‘ë¦¬ */
  padding: 10px 30px;       /* ìœ„ì•„ë˜/ì¢Œìš° ì—¬ë°± */
  border-radius: 0;          /* ëª¨ì„œë¦¬ ê°ì§€ê²Œ */
  display: inline-block;     /* ì¹¸ í¬ê¸° ê¸€ì”¨ë§Œí¼ */
}


  </style>
</head>

<body>

<h1>ğŸ”¥ í…ŒìŠ¤íŠ¸ ì¤‘ ğŸ”¥</h1>


<audio id="bgm1" src="ScreenRecording_12-28-2025-05-32-44_1.mp3"></audio>
<audio id="bgm2" src="Classic 2.m4a"></audio>
<audio id="bgm3" src="bgm3.mp3"></audio>
<audio id="bgm4" src="bgm4.mp3"></audio>
<audio id="bgm5" src="bgm5.mp3"></audio>
  
<div id="story">
  <p class="line disappear bgm1-start">ì•ˆë…•í•˜ì„¸ìš”! ì˜ ì§€ë‚´ì…¨ë‚˜ìš”?</p>
  <p class="line disappear">ì˜ˆì „ì˜ ì „ ìœ ì”¨ë…¸ë²¨ ì‘ê°€ê°€ ë˜ëŠ”ê²Œ ê¿ˆì´ì—ˆì–´ìš”. ê·¸ë¦¬ê³  ì•„ì§ë„ ê·¸ ê¿ˆì„ ìŠì§€ ëª»í•˜ê³  ê²°êµ­ì—” ì´ë ‡ê²Œ ë§Œë“¤ì–´ë²„ë ¸ë‹µë‹ˆë‹¤.^^.</p>
  <p class="line disappear">ê·¸ë•Œì˜ ê°ì„±ì´ ì˜ ë¬»ì–´ë‚˜ëŠ” ê¸€ì´ ë˜ê¸¸ ë°”ë¼ë©´ì„œ ì¨ë´…ë‹ˆë‹¤. ê·¸ëŸ¼ ì¬ë°Œê²Œ ë´ì£¼ì„¸ìš”!</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line bgm2-start"> ì²«ë¬¸ì¥</p>
  
</div>

<script>
  // ------------------------------
  // ë¶€ë“œëŸ¬ìš´ í˜ì´ë“œ
  // ------------------------------
  function fadeInSmooth(audio, duration = 1500) {
    audio.pause();
    audio.currentTime = 0;
    audio.volume = 0;
    audio.play();
    const startTime = performance.now();
    function step(now) {
      const t = Math.min((now - startTime) / duration, 1);
      audio.volume = Math.sin(t * Math.PI / 2);
      if (t < 1) requestAnimationFrame(step);
    }
    requestAnimationFrame(step);
  }

  function fadeOutSmooth(audio, duration = 1000, callback) {
    const startTime = performance.now();
    const initialVolume = audio.volume;
    function step(now) {
      const t = Math.min((now - startTime) / duration, 1);
      audio.volume = initialVolume * Math.cos(t * Math.PI / 2);
      if (t < 1) requestAnimationFrame(step);
      else {
        audio.pause();
        audio.currentTime = 0;
        if (callback) callback();
      }
    }
    requestAnimationFrame(step);
  }

  // ------------------------------
  // ê¸€ + BGM ë³€ìˆ˜
  // ------------------------------
  const lines = document.querySelectorAll(".line");
  let index = 0;

  const bgmMap = {
    "bgm1-start": document.getElementById("bgm1"),
    "bgm2-start": document.getElementById("bgm2"),
    "bgm3-start": document.getElementById("bgm3"),
    "bgm4-start": document.getElementById("bgm4"),
    "bgm5-start": document.getElementById("bgm5")
  };

  let currentBgm = null;

  // ------------------------------
  // í´ë¦­ ì´ë²¤íŠ¸
  // ------------------------------
  document.body.addEventListener("click", () => {
    if (index >= lines.length) return;

    const currentLine = lines[index];

    // ì´ì „ ê¸€ í˜ì´ë“œ ì•„ì›ƒ
    const toDisappear = document.querySelectorAll(".disappear");
    toDisappear.forEach(line => {
      if (line !== currentLine) {
        line.classList.remove("show");
        line.classList.add("hide");
      }
    });

    // í˜„ì¬ ê¸€ ë“±ì¥
    currentLine.classList.add("show");
    currentLine.classList.remove("hide");

    // ì²« ë“±ì¥ + BGM ì‹œì‘
    Object.keys(bgmMap).forEach(key => {
      if (currentLine.classList.contains(key)) {
        if (currentBgm !== bgmMap[key]) {
          if (currentBgm) {
            fadeOutSmooth(currentBgm, 1000, () => {
              currentBgm = bgmMap[key];
              fadeInSmooth(currentBgm, 1500);
            });
          } else {
            currentBgm = bgmMap[key];
            fadeInSmooth(currentBgm, 1500);
          }
        }
      }
    });

    index++;
  });
</script>



</body>
</html>
