<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>소설 테스트</title>
 <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&family=Suit:wght@300;400;500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

  <style>



    /* --------------------------
       전체 페이지
    --------------------------- */
    body {

      /* 인트로 전체 화면 */
/* ==========================
   INTRO
========================== */

/* 인트로 전체 화면 */
#intro {
  position: fixed;
  inset: 0;
  z-index: 1000;

  display: flex;
  justify-content: center;
  align-items: center;

  background-image:
    linear-gradient(
      rgba(0, 0, 0, 0.15),
      rgba(0, 0, 0, 0.15)
    ),
    url("정환1.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  transition: opacity 0.8s ease;
  overflow: hidden; /* 스크롤바 방지 */
}

/* 블러 레이어 */
#intro::before {
  content: "";
  position: absolute;
  inset: 0;
  backdrop-filter: blur(2px);
  pointer-events: none;
}

/* 노이즈 레이어 */
#intro::after {
  content: "";
  position: absolute;
  inset: 0;

  background-image: url("노이즈.png");
  background-repeat: repeat;
  opacity: 0.1;


  pointer-events: none;
}

/* 하단 경계선 */
#intro-border {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;

  height: 2px;
  background: linear-gradient(
    to right,
    transparent,
    rgba(255,255,255,0.7),
    transparent
  );

  pointer-events: none;
}

/* 인트로 내용 */
.intro-inner {
  position: relative;
  text-align: center;
}

/* 제목 */
#intro h1 {
  font-family: 'Nanum Myeongjo', serif;
  font-size: 28px;
  margin-bottom: 40px;
  color: #fff;
  text-shadow: 0 1px 4px rgba(0,0,0,0.6);
}

/* 설명 문구 */
#intro p {
  font-size: 12px;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.45);
}

/* 사라질 때 */
#intro.hide {
  opacity: 0;
  pointer-events: none;
}
#intro.hidden {
  display: none;
}


      font-family: 'Noto Sans KR', system-ui, -apple-system, sans-serif;
      font-size: 15px;               /* 기본 본문 글씨 크기 */
      line-height: 1.1;              /* 줄 간격 */
      letter-spacing: -0.015em;
      padding: 0 8px;
      cursor: pointer;
      display: inline-block;
      flex-direction: column;
      align-items: center;
      background-color: #fafafa;
      overflow-wrap: break-word; /* 긴 단어가 화면을 넘어가지 않도록 자동 줄바꿈 */
    }

    /* --------------------------
       제목
    --------------------------- */
    h1 {
      font-size: 30px;
      text-align: center;
      margin-bottom: 200px;
      color: #333;
      font-family: 'Nanum Myeongjo', serif;
    
    }
    

    /* --------------------------
       소설 영역
    --------------------------- */
    #story {
      font-family: 'SUIT', sans-serif;
      max-width: 600px;
      text-align: left;
      margin: 0 auto;
      position: relative;
      padding: 0 8px;
      line-height: 1.1;
      letter-spacing: -0.015em;
    }

    /* --------------------------
       글 + 이미지 공통 스타일
    --------------------------- */
    .line {
  font-size: 15px !important;
  opacity: 0;
  font-weight: 300;
  transition: opacity 0.4s ease;
  margin-bottom: 20px;
  max-width: 100%;
  height: auto;
  border: none;
}

.line.show {
  opacity: 1;
}

.line.hide {
  opacity: 0;
}
p {
  white-space: pre-line; /* 공백과 줄바꿈 문자(\n)를 그대로 반영 */
}    
img.line {
  border-radius: 8px;
}
/* 기본 로딩 (big 포함) */
.loading::after {
  content: "";
  display: inline-block;
  animation: dots 1.2s infinite steps(4, end);
  color: #2C3E50;
  font-family: 'Jua', system-ui, sans-serif;
  font-weight: 400;
  text-align: center;
  
}

/* 작은 로딩만 더 빠르게 */
.loading.small::after {
  animation-duration: 0.5s;
}
    

/* 작은 로딩 */
.loading.small {
  font-size: 30px;
  letter-spacing: 7px;
}
.loading.small::after {
  color: #9CA3AF; /* 연한 회색 */
}
/* 큰 로딩 */
.loading.big {
  font-size: clamp(40px, 6vw, 42px);
  letter-spacing: 10px;
  display: inline-block;
  margin: 12px 0;
  font-weight: 600;
  margin-top: 100vh;
  margin-bottom: 100vh;

}
    
.loading.big::after {
  color: #0EA5E9; /* 조금 더 산뜻하고 현대적인 느낌 */
}
@keyframes dots {
  0%   { content: ""; }
  25%  { content: "."; }
  50%  { content: ".."; }
  75%  { content: "..."; }
}

    
html, body {
  overflow-x: hidden;
}
#black-overlay {
  position: fixed;
  inset: 0; /* 상하좌우 0 */
  background: rgba(0,0,0,0.9); /* 검은색 + 투명도 조절 */
  z-index: 9999; /* 모든 콘텐츠 위 */
  opacity: 0; /* 처음에는 안 보이게 */
  pointer-events: none; /* 클릭 방해 안 함 */
  transition: opacity 1.0s ease; /* 천천히 나타나고 사라짐 */
  overflow: hidden;     /* 스크롤 방지 */
}

/* 나타낼 때 */
#black-overlay.active {
  opacity: 1;
}
html, body {
  overscroll-behavior: none;
}

  </style>
</head>

<body>
  <!-- 깜빡임용 오버레이 -->
<div id="black-overlay"></div> 
<div id="intro">
  <div class="intro-inner">
<h1> 제발... <h1>
<div id="intro-border"></div>
    <p>화면을 터치하면 이야기가 시작됩니다</p>
    <p>※ 본 글에는 사운드가 포함되어 있습니다 ※</p>
  </div>
</div>

<audio id="bgm1" src="모야.mp3"></audio>
<audio id="bgm2" src="살만찌고.mp3"></audio>
<audio id="bgm3" src="초콜렛군 오렌지양.mp3"></audio>
<audio id="bgm4" src="가슴이 폴짝폴짝.mp3"></audio>
<audio id="bgm5" src="사랑안해.mp3"></audio>
  
<div id="story">
  <p class="line disappear bgm3-start">안녕하세요! 잘 지내셨나요?</p>
  <p class="line disappear">예전의 전 유씨노벨 작가가 되는게 꿈이었어요. 하지만 그러기도 전에 그 꿈의 공간이 사라져버렸고 저는 아직도 그 공간을 그리워 하고 다시 꿈꾸고 있어요. 유씨노벨과 같진 않지만 유씨노벨만의 기능을 조금 추가한 이런 공간을 만들어봤습니다.^^.</p>
  <p class="line disappear">그때의 감성이 잘 묻어나는 글이 되길 바라면서 써봅니다. 그럼 재밌게 봐주세요!</p>
  <p class="line disappear">
  <span class="loading small"></span>
</p>

<p class="line disappear">
  <span class="loading big"></span>
</p>

  <p class="line bgm2-start">뭐라고 해야되나. 눈빛이 살아있다고 해야하나. 표정이 다양하다고 해야하나. 눈썹도 찐하고 눈동자는 또 너무 검어서 앞에서 무슨 말을 하든 심판 당하고 간파 당할 것 같은. 자아가 뚜렷해보여서 어딘가 모르게 자꾸 시선이 가는.. 그런 묘오한 기운이 있다. 뭔가 범상치않는 일이나 사람들이 곧 이쪽으로 몰릴 것만 같은 그런 얼굴. 이라네요 제가.</p>
  <p class="line">누가?
몰라 모르는 사람. 모르는 사람 누구?
    
</p>
  <p class="line">.. 아니에요 그냥 빨리 해주세요. 영혼 없이 마우스를 달칵거리며 대꾸하는 쌤의 반응에 말을 이어갈 의지가 점점 닳는다. 저녁 사준다고 조금만 기다리라고 하신게 벌써 40분 전이다. 
번쩍이는 컴퓨터 화면 앞에 함께 번쩍거리는 쌤의 얼굴을 40분째 보고있으니 답답함이 스멀스멀 올라왔다. 바쁘시면서 왜 하필 오늘 먹자고 하신건지 참. 물론 너무 감사하지마는 기다리는 건 언제나 고통이다.

</p>
  <p class="line">그런 내가 신경이 쓰이셨는지 곁눈짓을 하며 나의 눈치를 살피다 잠시 생각하더니 30초 전에 포기한 대화를 이어가신다.
  </p>
  <p class="line">“그거 그냥 한마디로 이쁘다는거잖아”</p>
  <p class="line">눈이 반짝이고 자꾸만 시선이 간다잖아. 그게 이쁘단 소리지. </p> 

그 말을 하는 쌤의 눈이 반짝인다.</p>
  <p class="line">농담하시는건가 싶은데 웃음기가 없어 괜히 낯부끄러워졌다. 그럴리가.</p>
  <p class="line">“근데 누가 그래? 길가는 사람이 붙자고 그런건 아닐거 아냐” </p>
  <p class="line">“맞는디.” </p>
  <p class="line">“뭐야 사이비야? 도 뭐시기?” </p>
  <p class="line">“아니이.. 그냥 사주 봤어요. 재미로” </p>
  <p class="line">“사주? 그걸 믿어? 근데 사주에서 관상도 봐주나” </p>
  <p class="line">“아니이.. 그냥 사주 봤어요. 재미로” </p>
  <p class="line">그런소리 듣기 싫어서 말하기 싫었던거라구요.. </p>

  
  


  <img class="line bgm4-start" src="KakaoTalk_20251229_220819096.jpg" alt="하루토" />

  <p class="line black-flash"></p>
 <p class="line stop-bgm">
   <span class="loading big"></span>
 </p>

</div>

<script>
// ------------------------------
// BGM 페이드인/페이드아웃
// ------------------------------
function fadeInSmooth(audio, duration = 1500) {
  audio.pause();
  audio.currentTime = 0;
  audio.volume = 0;
  audio.play();
  const startTime = performance.now();
  function step(now) {
    const t = Math.min((now - startTime) / duration, 1);
    audio.volume = Math.sin(t * Math.PI / 2);
    if (t < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

function fadeOutSmooth(audio, duration = 1500, callback) {
  const startTime = performance.now();
  const initialVolume = audio.volume;
  function step(now) {
    const t = Math.min((now - startTime) / duration, 1);
    audio.volume = initialVolume * Math.cos(t * Math.PI / 2);
    if (t < 1) requestAnimationFrame(step);
    else {
      audio.pause();
      audio.currentTime = 0;
      if (callback) callback();
    }
  }
  requestAnimationFrame(step);
}

function stopAllBgm() {
  document.querySelectorAll("audio").forEach(audio => {
    audio.pause();
    audio.currentTime = 0;
  });
}

// ------------------------------
// 글 + BGM 변수
// ------------------------------
const lines = document.querySelectorAll(".line");
let index = 0;

const bgmMap = {
  "bgm1-start": document.getElementById("bgm1"),
  "bgm2-start": document.getElementById("bgm2"),
  "bgm3-start": document.getElementById("bgm3"),
  "bgm4-start": document.getElementById("bgm4"),
  "bgm5-start": document.getElementById("bgm5")
};

let currentBgm = null;
let introDone = false;

// ------------------------------
// 깜빡임 함수
// ------------------------------
function flashBlack(duration = 800) {
  const overlay = document.getElementById("black-overlay");
  overlay.classList.add("active");
  setTimeout(() => {
    overlay.classList.remove("active");
  }, duration);
}

// ------------------------------
// 클릭 이벤트
// ------------------------------
document.body.addEventListener("click", () => {

  // 아직 인트로면
  if (!introDone) {
    introDone = true;

    const intro = document.getElementById("intro");
    intro.classList.add("hide");

    setTimeout(() => {
      intro.classList.add("hidden");
    }, 900);

    // 첫 줄 보여주기
    const firstLine = document.querySelector(".line");
    firstLine.classList.add("show");
    firstLine.scrollIntoView({ behavior: "smooth", block: "center" });

    return;
  }

  // 인덱스 초과 방지
  if (index >= lines.length) return;

  const currentLine = lines[index];
  if (currentLine.classList.contains("stop-bgm")) {
  stopAllBgm();
}

  // 이전 글 숨기기
  const toDisappear = document.querySelectorAll(".disappear");
  toDisappear.forEach(line => {
    if (line !== currentLine) {
      line.classList.remove("show");
      line.classList.add("hide");
    }
  });

  // 현재 글 등장
  currentLine.classList.add("show");
  currentLine.classList.remove("hide");

  // 깜빡임 적용 (해당 클래스가 있을 때만)
  if (currentLine.classList.contains("black-flash")) {
    flashBlack(1000); // 200ms 깜빡임
  }

  // 자동 스크롤
  currentLine.scrollIntoView({
    behavior: window.innerWidth < 768 ? "smooth" : "auto",
    block: "center"
  });

  // BGM 시작/전환
  Object.keys(bgmMap).forEach(key => {
    if (currentLine.classList.contains(key)) {
      if (currentBgm !== bgmMap[key]) {
        if (currentBgm) {
          fadeOutSmooth(currentBgm, 1000, () => {
            currentBgm = bgmMap[key];
            fadeInSmooth(currentBgm, 1500);
          });
        } else {
          currentBgm = bgmMap[key];
          fadeInSmooth(currentBgm, 1500);
        }
      }
    }
  });

  index++;
});
</script>


</body>
</html>
