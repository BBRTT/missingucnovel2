<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì²« ë²ˆì§¸ ì†Œì„¤</title>

  <style>
    body {
  font-family: serif;
  font-size: 20px;
  line-height: 1.8;
  padding: 40px;
  cursor: pointer;

  display: flex;
  flex-direction: column;
  align-items: center;
}
#story {
  max-width: 600px;
  text-align: center;
}

    .line {
      opacity: 0;
      transition: opacity 0.4s ease;
      margin-bottom: 20px;
    }

    .line.show {
      opacity: 1;
    }
    .line.hide {
  opacity: 0;
}

button {
  margin: 20px 0 40px;
  padding: 10px 24px;
  font-size: 16px;
  border-radius: 999px;
  border: 1px solid #ccc;
  background: white;
  cursor: pointer;
}

button:hover {
  background: #f2f2f2;
}

  </style>
</head>

<body>

<h1>ğŸ”¥ í…ŒìŠ¤íŠ¸ ì¤‘ ğŸ”¥</h1>

<button id="startBtn">BGM</button>
<audio id="bgm1" src="ScreenRecording_12-28-2025-05-32-44_1.mp3"></audio>
<audio id="bgm2" src="Classic 2.m4a"></audio>

<div id="story">
  <p class="line disappear">ì•ˆë…•í•˜ì„¸ìš”! ì˜ ì§€ë‚´ì…¨ë‚˜ìš”?</p>
  <p class="line disappear">ì˜ˆì „ì˜ ì „ ìœ ì”¨ë…¸ë²¨ ì‘ê°€ê°€ ë˜ëŠ”ê²Œ ê¿ˆì´ì—ˆì–´ìš”. ê·¸ë¦¬ê³  ì•„ì§ë„ ê·¸ ê¿ˆì„ ìŠì§€ ëª»í•˜ê³  ê²°êµ­ì—” ì´ë ‡ê²Œ ë§Œë“¤ì–´ë²„ë ¸ë‹µë‹ˆë‹¤.^^.</p>
  <p class="line disappear">ê·¸ë•Œì˜ ê°ì„±ì´ ì˜ ë¬»ì–´ë‚˜ëŠ” ê¸€ì´ ë˜ê¸¸ ë°”ë¼ë©´ì„œ ì¨ë´…ë‹ˆë‹¤. ê·¸ëŸ¼ ì¬ë°Œê²Œ ë´ì£¼ì„¸ìš”!</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line">*</p>
  <p class="line bgm2-start"> ì²«ë¬¸ì¥</p>
  
</div>

<script>
  // ------------------------------
  // í˜ì´ë“œ ì¸ / í˜ì´ë“œ ì•„ì›ƒ
  // ------------------------------
  function fadeIn(audio, duration = 1000) {
    audio.volume = 0;
    audio.play();
    const startTime = performance.now();

    function step(now) {
      const progress = (now - startTime) / duration;
      audio.volume = Math.min(progress, 1);
      if (progress < 1) requestAnimationFrame(step);
    }

    requestAnimationFrame(step);
  }

  function fadeOut(audio, duration = 1000, callback) {
    const startTime = performance.now();
    const initialVolume = audio.volume;

    function step(now) {
      const progress = (now - startTime) / duration;
      audio.volume = Math.max(initialVolume * (1 - progress), 0);
      if (progress < 1) {
        requestAnimationFrame(step);
      } else {
        audio.volume = 0;
        audio.pause();
        audio.currentTime = 0;
        if (callback) callback();
      }
    }

    requestAnimationFrame(step);
  }

  // ------------------------------
  // ë³€ìˆ˜ ì •ì˜
  // ------------------------------
  const lines = document.querySelectorAll(".line");
  let index = 0;

  const bgm1 = document.getElementById("bgm1");
  const bgm2 = document.getElementById("bgm2");
  const startBtn = document.getElementById("startBtn");

  // ------------------------------
  // BGM ì‹œì‘ ë²„íŠ¼
  // ------------------------------
  startBtn.addEventListener("click", (e) => {
    e.stopPropagation(); // ë²„íŠ¼ í´ë¦­ì´ ê¸€ í´ë¦­ìœ¼ë¡œ ë²ˆì§€ì§€ ì•Šê²Œ
    fadeIn(bgm1, 1500);  // ì²« ìŒì•… ë¶€ë“œëŸ½ê²Œ í˜ì´ë“œ ì¸
  });

  // ------------------------------
  // í™”ë©´ í´ë¦­ ì´ë²¤íŠ¸ (ê¸€ í˜ì´ë“œ + ìŒì•… ì „í™˜)
  // ------------------------------
  document.body.addEventListener("click", () => {
    if (index >= lines.length) return;

    const currentLine = lines[index];

    // ì´ì „ì— ì‚¬ë¼ì ¸ì•¼ í•  ë¬¸ì¥ ì²˜ë¦¬
    const toDisappear = document.querySelectorAll(".disappear");
    toDisappear.forEach(line => {
      if (line !== currentLine) {
        line.classList.remove("show");
        line.classList.add("hide");
      }
    });

    // í˜„ì¬ ë¬¸ì¥ ë“±ì¥
    currentLine.classList.add("show");
    currentLine.classList.remove("hide");

    // ------------------------------
    // ìŒì•… ì „í™˜
    // ------------------------------
    if (currentLine.classList.contains("bgm2-start")) {
      fadeOut(bgm1, 1000, () => fadeIn(bgm2, 1500));
    }

    index++; // ë‹¤ìŒ ë¬¸ì¥ìœ¼ë¡œ ì§„í–‰
  });
</script>




</body>
</html>
